# V1.1 Implementation Commands

## ðŸš€ Quick Start - Install All New Dependencies

```bash
# Core AI - Gemini
npm install @google/generative-ai

# Mapping & Geolocation
npm install leaflet react-leaflet
npm install --save-dev @types/leaflet

# Optional: Mapbox (alternative to Leaflet)
npm install mapbox-gl react-map-gl
npm install --save-dev @types/mapbox-gl

# 3D & AR/VR
npm install three @react-three/fiber @react-three/drei
npm install --save-dev @types/three

# Audio Analysis & Processing
npm install wavesurfer.js tone
npm install recordrtc

# WebRTC for Live Classes & Tandem
npm install simple-peer peerjs
npm install --save-dev @types/simple-peer

# Biometric Authentication (WebAuthn)
npm install @simplewebauthn/browser
npm install --save-dev @simplewebauthn/server

# Encryption & Security
npm install crypto-js tweetnacl tweetnacl-util
npm install --save-dev @types/crypto-js

# Charts & Data Visualization
npm install recharts d3
npm install --save-dev @types/d3

# UI Enhancements
npm install swiper
npm install react-responsive-carousel
npm install react-spring @use-gesture/react
npm install react-intersection-observer

# Additional Testing
npm install --save-dev @testing-library/user-event
npm install --save-dev @vitest/coverage-v8
```

## Complete Installation (One Command)

```bash
npm install @google/generative-ai leaflet react-leaflet mapbox-gl react-map-gl three @react-three/fiber @react-three/drei wavesurfer.js tone recordrtc simple-peer peerjs @simplewebauthn/browser crypto-js tweetnacl tweetnacl-util recharts d3 swiper react-responsive-carousel react-spring @use-gesture/react react-intersection-observer && npm install --save-dev @types/leaflet @types/mapbox-gl @types/three @types/simple-peer @types/crypto-js @types/d3 @testing-library/user-event @vitest/coverage-v8 @simplewebauthn/server
```

## Environment Variables Setup

Create/Update `.env` file:

```env
# ============================================
# Ma'a yegue V1.1 Environment Variables
# ============================================

# Existing Firebase Config (keep as is)
VITE_FIREBASE_API_KEY=your_existing_key
VITE_FIREBASE_AUTH_DOMAIN=your_existing_domain
VITE_FIREBASE_PROJECT_ID=your_existing_project_id
VITE_FIREBASE_STORAGE_BUCKET=your_existing_bucket
VITE_FIREBASE_MESSAGING_SENDER_ID=your_existing_sender_id
VITE_FIREBASE_APP_ID=your_existing_app_id

# ============================================
# NEW IN V1.1
# ============================================

# Google Gemini AI
VITE_GEMINI_API_KEY=your_gemini_api_key_here
VITE_GEMINI_MODEL=gemini-2.0-flash-exp

# Mapbox (for Interactive Atlas)
VITE_MAPBOX_ACCESS_TOKEN=your_mapbox_token_here
VITE_MAPBOX_STYLE=mapbox://styles/mapbox/streets-v11

# WebRTC (for Live Classes & Tandem Learning)
VITE_PEER_SERVER_HOST=0.peerjs.com
VITE_PEER_SERVER_PORT=443
VITE_PEER_SERVER_PATH=/
VITE_PEER_SERVER_SECURE=true

# WebAuthn (Biometric 2FA)
VITE_WEBAUTHN_RP_NAME=Ma'a yegue
VITE_WEBAUTHN_RP_ID=maayegue.app
VITE_WEBAUTHN_ORIGIN=https://maayegue.app

# Security & Encryption
VITE_ENCRYPTION_KEY=your_32_character_encryption_key_here
VITE_ENCRYPTION_IV=your_16_character_iv_here

# Web Application Firewall (if using)
VITE_WAF_ENDPOINT=your_waf_endpoint_here

# Payment Gateway (existing, but document)
VITE_CAMPAY_API_KEY=your_campay_key
VITE_CAMPAY_USERNAME=your_campay_username

# Analytics (existing)
VITE_ANALYTICS_ID=your_analytics_id

# Feature Flags (New - for gradual rollout)
VITE_ENABLE_AR_VR=true
VITE_ENABLE_MARKETPLACE=true
VITE_ENABLE_VIRTUAL_CLASSES=true
VITE_ENABLE_BIOMETRIC_2FA=true
VITE_ENABLE_NGONDO_COINS=true

# API Rate Limits
VITE_GEMINI_RATE_LIMIT=100
VITE_MAPBOX_RATE_LIMIT=50000
```

## Get API Keys

### 1. Google Gemini AI
```
1. Go to: https://makersuite.google.com/app/apikey
2. Click "Get API key"
3. Create new project or select existing
4. Copy API key to VITE_GEMINI_API_KEY
```

### 2. Mapbox
```
1. Go to: https://account.mapbox.com/
2. Sign up/Login
3. Go to Tokens section
4. Create new token with scopes: styles:read, fonts:read, datasets:read
5. Copy token to VITE_MAPBOX_ACCESS_TOKEN
```

### 3. PeerJS (Free)
```
Default values work:
VITE_PEER_SERVER_HOST=0.peerjs.com
VITE_PEER_SERVER_PORT=443

Or self-host PeerJS server for production
```

## Folder Structure Creation

```bash
# Windows PowerShell
New-Item -ItemType Directory -Force -Path "src\features\atlas\components"
New-Item -ItemType Directory -Force -Path "src\features\atlas\services"
New-Item -ItemType Directory -Force -Path "src\features\atlas\types"
New-Item -ItemType Directory -Force -Path "src\features\atlas\pages"

New-Item -ItemType Directory -Force -Path "src\features\encyclopedia\components"
New-Item -ItemType Directory -Force -Path "src\features\encyclopedia\services"
New-Item -ItemType Directory -Force -Path "src\features\encyclopedia\pages"

New-Item -ItemType Directory -Force -Path "src\features\historical-sites\components"
New-Item -ItemType Directory -Force -Path "src\features\historical-sites\services"
New-Item -ItemType Directory -Force -Path "src\features\historical-sites\pages"

New-Item -ItemType Directory -Force -Path "src\features\archives\components"
New-Item -ItemType Directory -Force -Path "src\features\archives\services"
New-Item -ItemType Directory -Force -Path "src\features\archives\pages"

New-Item -ItemType Directory -Force -Path "src\features\ar-vr\components"
New-Item -ItemType Directory -Force -Path "src\features\ar-vr\services"
New-Item -ItemType Directory -Force -Path "src\features\ar-vr\pages"

New-Item -ItemType Directory -Force -Path "src\features\adaptive-learning\components"
New-Item -ItemType Directory -Force -Path "src\features\adaptive-learning\services"

New-Item -ItemType Directory -Force -Path "src\features\pronunciation-lab\components"
New-Item -ItemType Directory -Force -Path "src\features\pronunciation-lab\services"
New-Item -ItemType Directory -Force -Path "src\features\pronunciation-lab\pages"

New-Item -ItemType Directory -Force -Path "src\features\ai-mentor\components"
New-Item -ItemType Directory -Force -Path "src\features\ai-mentor\services"
New-Item -ItemType Directory -Force -Path "src\features\ai-mentor\pages"

New-Item -ItemType Directory -Force -Path "src\features\family-mode\components"
New-Item -ItemType Directory -Force -Path "src\features\family-mode\services"
New-Item -ItemType Directory -Force -Path "src\features\family-mode\pages"

New-Item -ItemType Directory -Force -Path "src\features\marketplace\components"
New-Item -ItemType Directory -Force -Path "src\features\marketplace\services"
New-Item -ItemType Directory -Force -Path "src\features\marketplace\pages"

New-Item -ItemType Directory -Force -Path "src\features\events\components"
New-Item -ItemType Directory -Force -Path "src\features\events\services"
New-Item -ItemType Directory -Force -Path "src\features\events\pages"

New-Item -ItemType Directory -Force -Path "src\features\rpg-gamification\components"
New-Item -ItemType Directory -Force -Path "src\features\rpg-gamification\services"
New-Item -ItemType Directory -Force -Path "src\features\rpg-gamification\pages"

New-Item -ItemType Directory -Force -Path "src\features\virtual-economy\components"
New-Item -ItemType Directory -Force -Path "src\features\virtual-economy\services"
New-Item -ItemType Directory -Force -Path "src\features\virtual-economy\pages"

New-Item -ItemType Directory -Force -Path "src\features\unique-features\components"
New-Item -ItemType Directory -Force -Path "src\features\unique-features\services"
New-Item -ItemType Directory -Force -Path "src\features\unique-features\pages"

New-Item -ItemType Directory -Force -Path "src\core\services\ai"

New-Item -ItemType Directory -Force -Path "src\test\unit\atlas"
New-Item -ItemType Directory -Force -Path "src\test\unit\gemini"
New-Item -ItemType Directory -Force -Path "src\test\integration\marketplace"
New-Item -ItemType Directory -Force -Path "src\test\e2e"
```

## Database Seed Data

Add language atlas data to Firebase:

```bash
# Seed 280+ Cameroonian languages data
npm run seed-languages-atlas

# Seed cultural encyclopedia
npm run seed-encyclopedia

# Seed historical sites
npm run seed-historical-sites
```

## Verification

Test that everything is installed:

```bash
npm run type-check
npm run lint
npm run test
npm run build
```

## Development Server

```bash
npm run dev
```

Visit: http://localhost:5173

## Deployment

```bash
# Build for production
npm run build

# Deploy to Firebase
npm run firebase:deploy

# Or deploy to Netlify
npm run deploy:netlify:prod
```

## Troubleshooting

### Issue: Gemini AI not working
```
Solution: Check API key is valid
- Verify .env file has VITE_GEMINI_API_KEY
- Check quota limits in Google Cloud Console
```

### Issue: Map not loading
```
Solution: Check Mapbox token
- Verify VITE_MAPBOX_ACCESS_TOKEN
- Check browser console for errors
- Ensure token has correct scopes
```

### Issue: WebRTC connection fails
```
Solution: Check peer server config
- Try using default 0.peerjs.com
- Check firewall settings
- Ensure HTTPS is used in production
```

## Performance Optimization

```bash
# Analyze bundle size
npm run build -- --stats

# Run lighthouse audit
npm run preview
npx lighthouse http://localhost:4173 --view
```

## Security Checklist

- [ ] Rotate all API keys before production
- [ ] Enable rate limiting
- [ ] Configure CORS properly
- [ ] Enable Firebase security rules
- [ ] Test biometric 2FA
- [ ] Run security audit: `npm audit`
- [ ] Enable CSP headers
- [ ] Test E2E encryption

## Monitoring

Setup monitoring for:
- Gemini AI usage & quota
- Mapbox API calls
- WebRTC connection quality
- Payment transactions
- User engagement metrics

## Rollback Plan

If issues arise:

```bash
git tag v1.0-stable
git checkout v1.0-stable
npm install
npm run build
npm run deploy
```

## Support

- Technical Issues: dev@maayegue.app
- API Questions: api@maayegue.app
- Billing: billing@maayegue.app
